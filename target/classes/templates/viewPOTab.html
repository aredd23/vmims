<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<meta charset="ISO-8859-1">
<title>View PO Details</title>
<!-- JavaScript Bundle with Popper -->
<script
	src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"
	integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj"
	crossorigin="anonymous"></script>
<!-- CSS only -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css"
	rel="stylesheet"
	integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We"
	crossorigin="anonymous">

<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
	integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
	crossorigin="anonymous" referrerpolicy="no-referrer" />

<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
	integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
	crossorigin="anonymous">

<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<style type="text/css">
select.form-control:not([size]):not([multiple]) {
	height: calc(3rem + 2px);
}
</style>
</head>
<body>
	<div th:replace="fragment ::header"></div>

	<div class="container mt-5">
		<h5 align="center">View Purchase Order Details</h5>
		<ul class="nav nav-tabs mt-5">
			<li class="nav-item"><a href="#supplier" class="nav-link active"
				data-bs-toggle="tab">Order Details</a></li>
			<li class="nav-item"><a href="#product" class="nav-link"
				data-bs-toggle="tab">Product Details</a></li>
			<li class="nav-item"><a href="#productImages" class="nav-link"
				data-bs-toggle="tab">Product Images</a></li>

			<li class="nav-item"><a href="#orderReceipts" class="nav-link"
				data-bs-toggle="tab">Order Receipts</a></li>
		</ul>
		<div class="tab-content">
			<div class="tab-pane fade show active" id="supplier">
				<br>
				<div class="container">

					<div class="row">

						<div class="container card">
							<form th:action="@{/order/createOrder}" th:object="${order}"
								enctype="multipart/form-data" method="POST">

								<div class="card-body">
									<div class="form-row">
										<div class="col">
											<label> Supplier Id</label> <input type="number"
												required="required" name="supplierId"
												th:field="*{supplierId}"
												class="form-control form-control-sm"
												placeholder="Enter Supplier Id" />
										</div>

										<div class="col">
											<label> Supplier Name</label> <input type="text"
												required="required" name="supplierName"
												th:field="*{supplierName}"
												class="form-control form-control-sm"
												placeholder="Enter Supplier Name" />
										</div>

										<div class="col">
											<label> No of Items </label> <input type="number"
												name="quantity" required="required" th:field="*{quantity}"
												class="form-control form-control-sm"
												placeholder="Enter Product Quantity" />
										</div>
										<div class="col">
											<label> Shipping Weight </label> <input type="number"
												name="shippingWeight" required="required"
												th:field="*{shippingWeight}"
												class="form-control form-control-sm"
												placeholder="Enter Shipping Weight" />
										</div>

									</div>
									<br>

									<div class="form-row">

										<div class="col">
											<label> Shipping Address</label> <input type="text"
												name="shippingAddress" th:field="*{shippingAddress}"
												class="form-control form-control-sm"
												placeholder="Enter shippingAddress" />
										</div>

										<div class="col">
											<label> Carrier</label> <input type="text" name="carrier"
												th:field="*{carrier}" class="form-control form-control-sm"
												placeholder="Enter carrier" />
										</div>

										<div class="col">
											<label> Shipped By </label> <input type="text"
												name="shippedBy" th:field="*{shippedBy}"
												class="form-control form-control-sm"
												placeholder="Enter Shipped Person name" />
										</div>
										<!-- <div class="col">
								<label> Shipped Date </label> <input type="date"
									name="shippedDate" th:field="*{shippedDate}"
									class="form-control form-control-sm"
									placeholder="Enter shipped date" />
							</div> -->

										<div class="col">
											<label> Shipping Amount /Kg </label> <input type="number"
												name="multiplier" th:field="*{shippingAmountPerKg}"
												class="form-control form-control-sm"
												placeholder="Enter Shipping Amount" />
										</div>
									</div>
									<br>
									<div class="form-row">



										<div class="col">
											<label> GSTCharges </label> <input type="number"
												name="GSTCharges" th:field="*{GSTCharges}"
												class="form-control form-control-sm"
												placeholder="Enter GSTCharges" />
										</div>

										<div class="col">
											<label> Shipping Cost </label> <input type="number"
												name="shippingCost" th:field="*{shippingCost}"
												class="form-control form-control-sm"
												placeholder="Enter Shipping Cost" />
										</div>


										<div class="col">
											<label> Additional Cost</label> <input type="number"
												name="additionalCost" th:field="*{additionalCost}"
												class="form-control form-control-sm"
												placeholder="Enter Additional Cost" />
										</div>

										<div class="col">
											<label> Total Cost </label> <input type="number"
												required="required" name="totalCost" th:field="*{totalCost}"
												class="form-control form-control-sm"
												placeholder="Enter Total Cost" />
										</div>
									</div>
									<br>
									<div class="form-row">



										<div class="col">
											<label> Shipped Person Email </label> <input type="text"
												name="shippedPersonEmail" th:field="*{shippedPersonEmail}"
												class="form-control form-control-sm"
												placeholder="Enter email " />
										</div>

										<div class="col">
											<label> Shipped Person ContactNo </label> <input type="text"
												name="shippedPersonContactNo"
												th:field="*{shippedPersonContactNo}"
												class="form-control form-control-sm"
												placeholder="Enter contact number" />
										</div>

										<div class="col">
											<label> Other Details </label> <input type="text"
												name="otherDetails" th:field="*{otherDetails}"
												class="form-control form-control-sm"
												placeholder="Enter any additional comments" />
										</div>


										<div class="col">
											<label> Comments </label> <input type="text" name="comments"
												th:field="*{comments}" class="form-control form-control-sm"
												placeholder="Enter any additional comments" />
										</div>

									</div>
									<br>
									<div class="form-row">
										<div class="col">
											<label> Order Receipt </label> &nbsp;&nbsp; <img
												alt="Order Receipt" class="img-thumbnail"
												th:src="@{'data:image/*;base64,' + ${order.orderReceiptImageBase64}}"
												width="200px" height="150px" />
										</div>

										<div class="col" hidden="true">
											<label> Order Receipt Data</label> <input type="text"
												required="required" name="orderReceiptImageData"
												th:field="*{orderReceiptImageData}"
												class="form-control form-control-sm" />
										</div>

										<div class="col">
											<label> Upload New Order Receipt</label> <input type="file"
												name="orderReceiptImage" th:field="*{orderReceiptImage}"
												class="form-control form-control-sm"
												placeholder="Enter Product Image" />
										</div>


									</div>
								</div>


								<br> <br>

								<div class="box-footer" align="center">
									<button type="submit" class="btn btn-primary">Update
										Order Details</button>
								</div>

								<br> <br>
							</form>
						</div>
					</div>

				</div>
			</div>
			<div class="tab-pane fade" id="product">
				<br>

				<div class="container">


					<div class="row">

						<div class="container card">
							<form th:action="@{/products/addProduct}" th:object="${product}"
								enctype="multipart/form-data" method="POST">

								<div class="card-body">
									<div class="form-row">
										<div class="card-body">
											<div class="form-row">

												<div class="col">
													<label> Order Id </label> <input type="number"
														readonly="readonly" name="orderId" th:field="*{orderId}"
														class="form-control form-control-sm"
														placeholder="Enter order id" />
												</div>

												<div class="col">
													<label> Product Name </label> <input type="text"
														required="required" name="productName"
														th:field="*{productName}"
														class="form-control form-control-sm"
														placeholder="Enter Product Name" />
												</div>
												<div class="col">
													<label> Product Number </label> <input type="text"
														required="required" name="productNumber"
														th:field="*{productNumber}"
														class="form-control form-control-sm"
														placeholder="Enter Product Number" />
												</div>

												<div class="col">
													<label> GG Code</label> <input type="text"
														required="required" name="GGCode" th:field="*{GGCode}"
														class="form-control form-control-sm"
														placeholder="Enter GG Code" />
												</div>





											</div>
											<br>
											<div class="form-row">

												<div class="col">
													<label> Product Description </label> <input type="text"
														name="productDescription" th:field="*{productDescription}"
														class="form-control form-control-sm"
														placeholder="Enter Product Description" />
												</div>


												<div class="col">
													<label> Price </label> <input type="number" name="price"
														required="required" th:field="*{price}"
														class="form-control form-control-sm"
														placeholder="Enter Product Price" />
												</div>
												<div class="col">
													<label> Product Quantity </label> <input type="number"
														name="quantity" required="required" th:field="*{quantity}"
														class="form-control form-control-sm"
														placeholder="Enter Product Quantity" />
												</div>


												<div class="col">
													<label> Sold Quantity </label> <input type="number"
														name="soldQty" th:field="*{soldQty}" value="0"
														class="form-control form-control-sm"
														placeholder="Enter Sold Quantity" />
												</div>




											</div>
											<br>


											<div class="form-row">


												<div class="col">
													<label> Multiplier </label> <input type="number"
														name="multiplier" th:field="*{multiplier}"
														class="form-control form-control-sm"
														placeholder="Enter Multiplier value" />
												</div>

												<div class="col">
													<label> Total Cost </label> <input type="number"
														required="required" name="totalCost"
														th:field="*{totalCost}"
														class="form-control form-control-sm"
														placeholder="Enter Total Cost" />
												</div>

												<div class="col">
													<label> Other Details </label> <input type="text"
														name="otherDetails" th:field="*{otherDetails}"
														class="form-control form-control-sm"
														placeholder="Enter any additional comments" />
												</div>


												<div class="col">
													<label> Comments </label> <input type="text"
														name="comments" th:field="*{comments}"
														class="form-control form-control-sm"
														placeholder="Enter any additional comments" />
												</div>

											</div>
											<br>


											<div class="form-row">

												<div class="col">
													<label> Product Image </label> &nbsp;&nbsp; <img
														alt="Order Receipt" class="img-thumbnail"
														th:src="@{'data:image/*;base64,' + ${product.poImageBase64}}"
														width="100px" height="100px" />
												</div>

												<div class="col" hidden="true">
													<label> Product Image Data</label> <input type="text"
														name="poImageData" th:field="*{poImageData}"
														class="form-control form-control-sm" />
												</div>


												<div class="col">
													<label>Upload Product Image</label> <input type="file"
														name="poOriginalImage" th:field="*{poOriginalImage}"
														class="form-control form-control-sm"
														placeholder="Enter Product Image" />
												</div>


											</div>

										</div>

									</div>
									<br>
									<div class="box-footer" align="center">
										<button type="submit" class="btn btn-primary">Add
											Product</button>
									</div>

								</div>
							</form>
						</div>


						<div th:if="${productsList!= null}">
							<br>
							<center>
								<h5>Products List</h5>
							</center>
							<table class="table table-striped table-bordered">
								<thead class="table-dark">
									<tr>
										<th>S.No</th>
										<th>Order Id</th>
										<th>Product.Id</th>
										<th>GG Code</th>
										<th>Product Name</th>
										<th>Product Number</th>
										<th>Product Category</th>
										<th>Qty.</th>
										<th>Price</th>
										<th>Product</th>
										<th>Actions</th>
									</tr>
								</thead>

								<tbody>
									<tr th:each="product: ${productsList}">
										<td scope="row" th:text="${productStat.index+1}"></td>
										<td th:text="${product.orderId}"></td>
										<td th:text="${product.id}"></td>
										<td th:text="${product.GGCode}"></td>
										<td th:text="${product.ProductName}"
											style="white-space: nowrap;"></td>
										<td th:text="${product.ProductNumber}"
											style="white-space: nowrap;"></td>
										<td th:text="${product.productCategory}"
											style="white-space: nowrap;"></td>
										<td th:text="${product.quantity}"></td>
										<td th:text="${product.price}"></td>

										<td><img alt="Product Image" class="img-thumbnail"
											th:src="@{'data:image/*;base64,' + ${product.poImageBase64} }"
											width="80px" height="60px" /> <a
											th:if="${product.poImageBase64!= null}"
											th:href="@{/order/image/download/{id}(id=${product.id})}">Download</a>
										</td>


										<td style="white-space: nowrap;"><a
											th:href="@{/products/edit/{id}(id=${product.id})}"
											title="View/Edit"
											class="fa-regular fa-pen-to-square icon-dark"> </a>
											&nbsp;&nbsp; &nbsp; <a
											th:href="@{/products/delete/{id}(id=${product.id})}"
											title="Delete"
											class="fa-regular fa-trash-can icon-dark btn-delete"></a>
											&nbsp;&nbsp;
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>

			</div>

			<div class="tab-pane fade" id="productImages">
				<br>
				<h5>Product Images</h5>
				<br>
				<div class="container" th:if="${productsList!= null}">

					<table class="table table-striped table-bordered">
						<thead class="table-dark">
							<tr>
								<th>Product</th>
								<th>Price</th>
								<th>GG Code</th>
							</tr>
						</thead>
						<tbody>
							<tr th:each="product: ${productsList}">
								<td><img alt="Product Image" class="img-thumbnail"
									title="Product Image"
									th:src="@{'data:image/*;base64,' + ${product.poImageBase64}} "
									width="500px" height="400px" /></td>
								<td th:text=" ${product.price} "></td>
								<td th:text=" ${product.GGCode}"></td>
							</tr>
						</tbody>

					</table>

				</div>
			</div>

			<div class="tab-pane fade" id="orderReceipts">
				<br>
				<h5>Order Receipt</h5>
				<div class="container" th:if="${orderReceiptImageBase64!= null}">

					<table>

						<tbody>
							<tr>
								<td><img alt="Receipt Image" class="img-thumbnail"
									th:src="@{'data:image/*;base64,' + ${orderReceiptImageBase64}}"
									width="500px" height="400px" /></td>
							</tr>
							<tr>
								<td><a
									th:href="@{/order/receipt/image/download/{id}(id=${order.id})}">Download</a></td>
							</tr>
						</tbody>

					</table>

				</div>
			</div>
		</div>
	</div>
	<br>
	<br>
	<div th:replace="fragment ::footer"></div>
</body>
</html>