<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<title>SIMS</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
    integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
    crossorigin="anonymous" referrerpolicy="no-referrer" />

<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
	integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
	crossorigin="anonymous">

<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

<style>
label {
	color: green;
}
select.form-control:not([size]):not([multiple]) {
	height: calc(3rem + 2px);
}
</style>
</head>
<body>

	<div th:replace="fragment ::header"></div>


	<!-- <div class="col-lg-3">


		<form th:action="@{/suppliers/searchSuppliers}"
			th:object="${searchSupplier}" method="POST">
			 <input type="text" name="fieldName"
				th:field="*{fieldName}" class="form-control" placeholder="Select" />
				
				 <input type="text" name="value"
				th:field="*{value}" class="form-control" placeholder="Enter value" />
			<div class="box-footer">
				<button type="submit" class="btn btn-primary">Save</button>
			</div>
		</form>


	</div> -->
	<br>
		<div class="container">
		<h5 class="text-center">
			<b>Search for Suppliers / Products Data </b>
		</h5>

		<br>
		<form th:action="@{/search}" th:object="${searchData}" method="POST">

			<div class="form-row">
				
				<div class="col">
					<select required="required" autofocus="autofocus" name="fieldName"
						th:field="*{fieldName}" class="form-control form-control-sm">
						<option value="NONE"  autocapitalize="none" autofocus="autofocus">Search With </option>
						<option value="SupplierId">Supplier Id</option>
						<option value="SupplierName">Supplier Name</option>
						<option value="OrderId">Order Id</option>
						<option value="ProductNumber">Product Number</option>
						<option value="ProductName">Product Name</option>
						<option value="GGCode">GG Code</option>
					</select>
				</div>

				<div class="col">
					<input type="text" required="required" name="value"
						th:field="*{value}" class="form-control form-control-sm"
						placeholder="Enter Value" />
				</div>

				<div class="box-footer">
					<button type="submit" class="btn btn-primary">Search</button>
				</div>

			</div>
		</form>

	</div>
	<br><br>
	
	<div class="container">
	<h5 class="text-center">
			<b>Search Results </b>
		</h5>
	
	<div th:if="${suppliersList!= null}">
		<table class="table table-bordered table-condensed table-hover">
			<thead class="table-dark">
				<tr>
					<th>S.No</th>
					<th>Suplr.No</th>
					<th>Suplr.Name</th>
					<th>Category</th>
					<th>Email</th>
					<th>Mobile</th>
					<th>Reg Fee</th>
					<th>Balance Amount</th>
					<!-- <th>Created On</th>
					<th>Updated On</th> -->
					<th>Actions</th>
				</tr>
			</thead>
			<tbody>
				<tr th:each="supplier: ${suppliersList}" th:if="${suppliersList!= null}">
				
					<td scope="row" th:text="${supplierStat.index+1}"></td>
					<td scope="row" th:text="${supplier.id}"></td>
					<td th:text="${supplier.supplierName}"></td>
					<td th:text="${supplier.supplierCategory}"></td>
					<td th:text="${supplier.supplierEmailId}"></td>
					<td th:text="${supplier.supplierContactNo}"></td>
					<td th:text="${supplier.registrationFee}"></td>
					<td th:text="${supplier.balanceAmountWithVendor}"></td>

					<!-- class="btn btn-primary" -->
					<!-- <td th:text="${supplier.createdDate}"></td>
					<td th:text="${supplier.updatedDate}"></td> -->
					<td><a th:href="@{/supplier/edit/{id}(id=${supplier.id})}"
						class="fa-regular fa-pen-to-square icon-dark"></a> &nbsp; &nbsp;&nbsp;
						 <a
						class="fa-regular fa-trash-can icon-dark btn-delete"
						th:href="@{/supplier/delete/{id}(id=${supplier.id})}"></a>  &nbsp; &nbsp;&nbsp;
						 <a
						th:href="@{/supplier/{id}/orders(id=${supplier.id})}"
						class="btn btn-warning">Orders</a></td>
				</tr>
			</tbody>
		</table>
	</div>
	
	 <div th:if="${ordersList!= null}">
	<table class="table table-striped table-bordered">
			<thead class="table-dark">
				<tr>
					<th>S.No</th>
					<th>Order Id</th>
					<th>Splr.Id</th>
					<th>Splr.Name</th>
					<th>PO. Date</th>
					<th>Qty.</th>
					<th>Carrier</th>
					<th>Shipping Weight</th>
					<th>Shipping Amount/kg</th>
					<th>Total Cost</th>
					<th>PO. Receipt</th>
					<th>Actions</th>
				</tr>
			</thead>

			<tbody>
				<tr th:each="order: ${ordersList}">
					<td scope="row" th:text="${orderStat.index+1}"></td>
					<td th:text="${order.id}"></td>
					<td th:text="${order.supplierId}"></td>
					<td th:text="${order.supplierName}" style="white-space: nowrap;"></td>
					<td th:text="${order.createdDate}" style="white-space: nowrap;"></td>
					<td th:text="${order.quantity}"></td>
					<td th:text="${order.carrier}"></td>
					<td th:text="${order.shippingWeight}"></td>
					<td th:text="${order.shippingAmountPerKg}"></td>
					<td th:text="${order.totalCost}"></td>

					<td><a
						th:href="@{/order/receipt/image/preview/{id}(id=${order.id})}"
						th:target="_blank"> <img alt=" Order Receipt"
							class="img-thumbnail"
							th:src="@{'data:image/*;base64,' + ${order.orderReceiptImageBase64}}"
							width="80px" height="40px" /></a> <p th:if="${order.orderReceiptImageBase64!= null}"><a 
						th:href="@{/order/receipt/image/download/{id}(id=${order.id})}">Download</a></p>
						
					</td>

			
							
					<td style="white-space: nowrap;">
					
					<!-- <a th:href="@{/order/edit/{id}(id=${order.id})}" title="View/Edit"
						class="fa-regular fa-pen-to-square icon-dark"> </a> &nbsp;&nbsp;
						&nbsp; -->
						
						 <a th:href="@{/order/delete/{id}(id=${order.id})}" title="Delete"
						class="fa-regular fa-trash-can icon-dark btn-delete"></a>
						&nbsp;&nbsp;
						
						<a th:href="@{/order/quickView/{id}(id=${order.id})}" title="Quick View"
						class="btn btn-default btn-sm"> <span
							class="glyphicon glyphicon-eye-open"></span></a>
							
						 <!--  <a th:href="@{/order/createOrderAgain{id}(id=${order.id})}"
						class="btn btn-danger">Order Again</a></td> --></td>

				</tr>
			</tbody>
		</table>
		</div> 
		
			<div th:if="${productsList!= null}">
						<br>
						<center><h5>Products List</h5></center>
							<table class="table table-striped table-bordered">
								<thead class="table-dark">
									<tr>
										<th>S.No</th>
										<th>Order Id</th>
										<th>Product.Id</th>
										<th>GG Code</th>
										<th>Product Name</th>
										<th>Product Number</th>
										<th>Product Category</th>
										<th>Qty.</th>
										<th>Price</th>
										<th>Product</th>
										<th>Actions</th>
									</tr>
								</thead>

								<tbody>
									<tr th:each="product: ${productsList}">
										<td scope="row" th:text="${productStat.index+1}"></td>
										<td th:text="${product.orderId}"></td>
										<td th:text="${product.id}"></td>
										<td th:text="${product.GGCode}"></td>
										<td th:text="${product.ProductName}"
											style="white-space: nowrap;"></td>
											<td th:text="${product.ProductNumber}"
											style="white-space: nowrap;"></td>
										<td th:text="${product.productCategory}"
											style="white-space: nowrap;"></td>
										<td th:text="${product.quantity}"></td>
										<td th:text="${product.price}"></td>

										<td><img alt="Product Image" class="img-thumbnail"
											th:src="@{'data:image/*;base64,' + ${product.poImageBase64} }"
											width="80px" height="60px" />
											 <a th:if="${product.poImageBase64!= null}" th:href="@{/order/image/download/{id}(id=${product.id})}">Download</a>
										</td>


										<td style="white-space: nowrap;"><a
											th:href="@{/products/edit/{id}(id=${product.id})}"
											title="View/Edit"
											class="fa-regular fa-pen-to-square icon-dark"> </a>
											&nbsp;&nbsp; &nbsp; <a
											th:href="@{/products/delete/{id}(id=${product.id})}"
											title="Delete"
											class="fa-regular fa-trash-can icon-dark btn-delete"></a>
											&nbsp;&nbsp;
									</tr>
								</tbody>

							</table>
						</div>
		
		<div th:if="${noData!= null}">
		<br><br>
		<center>
		<h6><font color="red">No data found</font></h6>
		</center>
		</div>
		
		<br><br><br><br><br><br>
</div>
	<div th:replace="fragment ::footer"></div>
</body>
</html>