<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<title>SIMS</title>
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
	integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
	crossorigin="anonymous">

<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
	integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
	crossorigin="anonymous" referrerpolicy="no-referrer" />

<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
<script
	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
</head>
<body>
	<div th:replace="fragment ::header"></div>


	<div class="container">
		<br>

		<h4 align="center">Orders List</h4>

		<div class="row">
			<div class="col-lg-3">
				<a th:href="@{/order/new/{supplierId}(supplierId=${supplierId})}"
					class="btn btn-primary btn-sm mb-3">Create Order</a>

				<!-- 				 <a
					th:href="@{/supplier/searchOrders}"
					class="btn btn-primary btn-sm mb-3">Search Orders</a> -->
			</div>
		</div>
		<table class="table table-striped table-bordered">
			<thead class="table-dark">
				<tr>
					<th>S.No</th>
					<th>Order Id</th>
					<th>Splr.Id</th>
					<th>Splr.Name</th>

					<th>P.No.</th>
					<th>P.Name</th>
					<th>GGCode</th>
					<th>Product</th>

					<th>Qty.</th>
					<th>Multiplier</th>
					<th>Price</th>
					<th>Total Cost</th>
					<th>Receipt</th>
					<th>Actions</th>
				</tr>
			</thead>

			<tbody>
				<tr th:each="order: ${orders}">
					<td scope="row" th:text="${orderStat.index+1}"></td>
					<td th:text="${order.id}"></td>
					<td th:text="${order.supplierId}"></td>
					<td th:text="${order.supplierName}"></td>

					<td th:text="${order.productNumber}"></td>
					<td th:text="${order.productName}"></td>
					<td th:text="${order.GGCode}"></td>

					<td><a
						th:href="@{/order/product/image/preview/{id}(id=${order.id})}"
						target="_blank"> <img alt="Product Image"
							class="img-thumbnail"
							th:src="@{'data:image/*;base64,' + ${order.poImageBase64} }"
							width="80px" height="60px" /></a> <a
						th:href="@{/order/product/image/download/{id}(id=${order.id})}">Download</a>
					</td>

					<td th:text="${order.quantity}"></td>
					<td th:text="${order.price}"></td>
					<td th:text="${order.multiplier}"></td>
					<td th:text="${order.totalCost}"></td>

					<td><a
						th:href="@{/order/receipt/image/preview/{id}(id=${order.id})}"
						th:target="_blank"> <img alt=" Order Receipt"
							class="img-thumbnail"
							th:src="@{'data:image/*;base64,' + ${order.orderReceiptImageBase64}}"
							width="80px" height="60px" /></a> <a
						th:href="@{/order/receipt/image/download/{id}(id=${order.id})}">Download</a>
					</td>

					<td><a th:href="@{/order/edit/{id}(id=${order.id})}"
						class="fa-regular fa-pen-to-square icon-dark"> </a> &nbsp;&nbsp;
						&nbsp; <a th:href="@{/order/delete/{id}(id=${order.id})}"
						class="fa-regular fa-trash-can icon-dark btn-delete"></a>
						&nbsp;&nbsp; <!-- <a th:href="@{/order/createOrderAgain{id}(id=${order.id})}"
						class="btn btn-danger">Order Again</a></td> -->
				</tr>
			</tbody>

		</table>

		<br>

		<div th:if="${totalPages > 1}"></div>
		<div class="row col-sm-10">
			<div class="col-sm-1 page-item">
				<div class="col-sm-1 page-item">
					<a th:if="${currentPage==1}">Previous</a> &nbsp;&nbsp; <a
						th:if="${currentPage!=1}"
						th:href="@{'/order/page/'+${currentPage - 1}}">Previous</a>

				</div>


			</div>

			<div class="col-sm-1">
				<span class="page-item"
					th:each="i: ${#numbers.sequence(1,totalPages)}"> <a
					th:if="${currentPage!=i}" th:href="@{'/order/page/'+${i}}">[[${i}]]</a>
					<span th:unless="${currentPage!=i}">[[${i}]]</span>
				</span>

			</div>
			<div class="col-sm-1 page-item">
				<a th:if="${currentPage < totalPages}"
					th:href="@{'/order/page/'+${currentPage + 1}}">Next</a> <span
					class="page-item" th:unless="${currentPage < totalPages}">Next</span>
			</div>
			<div class="col-sm-1">
				<a th:if="${currentPage < totalPages}"
					th:href="@{'/order/page/'+${totalPages}}">Last</a> <span
					class="page-item" th:unless="${currentPage < totalPages}">Last</span>
			</div>
		</div>
	</div>
	<div th:replace="fragment ::footer"></div>
</body>
</html>